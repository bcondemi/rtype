<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:composition template="/WEB-INF/template/main.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                >
    <ui:define name="content">

        <h:form>  

            <p:panel header="Add Connection">

              
                
                <p:menubar>
                    <p:menuitem icon="ui-icon-search" value="Add" actionListener="#{connectionController.saveConnection}" update="connectionTable,addPanel"/>
                    <p:menuitem icon="ui-icon-search" value="Test" actionListener="#{connectionController.testCurrentConnection()}" />

                    <p:menuitem icon="ui-icon-search" value="Cancel" />

                </p:menubar>
                
                <p:spacer/>

                <p:panelGrid id="addPanel" columns="4">

                    <p:outputLabel for="cName" value="Name"/>
                    <p:inputText id="cName" value="#{connectionController.currentConnection.name}" />

                    <p:outputLabel for="cDsc" value="Description"/>
                    <p:inputText id="cDsc" value="#{connectionController.currentConnection.description}" style="width: 200"/>

                     <p:outputLabel for="drv" value="Driver"/>
                     <p:inputText id="drv" value="#{connectionController.currentConnection.driver}" />
                    
                    <p:outputLabel for="cStr" value="Conection String"/>
                    <p:inputText id="cStr" value="#{connectionController.currentConnection.conString}" />
                    
                     <p:outputLabel for="usr" value="Username"/>
                     <p:inputText id="usr" value="#{connectionController.currentConnection.unsername}" />
                     
                      <p:outputLabel for="pwd" value="Password"/>
                      <p:inputText id="pwd" value="#{connectionController.currentConnection.password}" />

                </p:panelGrid>

            </p:panel>

            <p:spacer/>



            <p:panel  header="Data" toggleable="true">

             

                <p:menubar>
                    <p:menuitem icon="ui-icon-search" value="Find" actionListener="#{reportController.initReportList}" />
                    <p:menuitem icon="ui-icon-search" value="Edit" actionListener="#{connectionController.editCurrentConnection}" update="addPanel" immediate="true" />
                    <p:menuitem icon="ui-icon-search" value="Delete All" actionListener="#{reportController.initReportList}" />
                    <p:menuitem icon="ui-icon-search" value="Test" actionListener="#{connectionController.testSelectedConnection}" />

                </p:menubar>

                <p:spacer />

                <p:dataTable id="connectionTable" var="conn" value="#{connectionController.connectionList}" 
                             filteredValue="#{reportController.filteredReports}" styleClass="bcs" paginatorPosition="top"
                             paginator="true" rows="100"  paginatorAlwaysVisible="true"
                             selection="#{connectionController.selectedConnection}" rowKey="#{conn.name}">  

                    <p:column selectionMode="multiple" style="width:2%" />                  

                    <p:column  id="name" headerText="Name">  
                        <h:outputText value="#{conn.name}" />  
                    </p:column>  

                    <p:column headerText="Description" >  
                        <h:outputText value="#{conn.description}" />  
                    </p:column>  

                    <p:column headerText="Connection String">  
                        <h:outputText value="#{conn.conString}" />  
                    </p:column>  

                </p:dataTable>  

            </p:panel>
        </h:form> 

    </ui:define>
</ui:composition>

